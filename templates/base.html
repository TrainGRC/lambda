<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <title>{% block title %}StinkBait{% endblock %}</title>
</head>

<body>
    {% include "header.html" %} {% block content %}{% endblock %}
    <script>
        // Get browser and device information


        const browser = {
            userAgent: navigator.userAgent,
            language: navigator.language,
            timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
            cookiesEnabled: navigator.cookieEnabled,
            localStorageEnabled: typeof Storage !== 'undefined',
            sessionStorageEnabled: typeof sessionStorage !== 'undefined',
            plugins: Array.from(navigator.plugins).map(plugin => plugin.name),
            fonts: [...new Set(document.fonts)].map(font => font.family),
            deviceOrientation: screen.orientation.type,
            hardware_concurrency: navigator.hardwareConcurrency,
            media_devices: navigator.mediaDevices,
            languages: navigator.languages,
            app_name: navigator.appName,
            app_version: navigator.appVersion,
            geolocation: navigator.geolocation,
            platform: navigator.platform,
            product: navigator.product,
            vendor: navigator.vendor,
            java_enabled: navigator.javaEnabled(),
            mime_types: navigator.mimeTypes
        };

        const device = {
            screenResolution: `${screen.width}x${screen.height}`,
            pixelDensity: window.devicePixelRatio,
            mobile: navigator.userAgent.includes('Mobile')
        };



        const ctx = document.createElement('canvas').getContext('2d');
        ctx.fillStyle = 'rgb(255,0,255)';
        ctx.beginPath();
        ctx.rect(20, 20, 150, 100);
        ctx.fill();
        ctx.stroke();
        ctx.closePath();
        ctx.beginPath();
        ctx.fillStyle = 'rgb(0,255,255)';
        ctx.arc(50, 50, 50, 0, Math.PI * 2, true);
        ctx.fill();
        ctx.stroke();
        ctx.closePath();

        const txt = 'abz190#$%^@£éú';
        ctx.textBaseline = 'top';
        ctx.font = '17px "Arial 17"';
        ctx.textBaseline = 'alphabetic';
        ctx.fillStyle = 'rgb(255,5,5)';
        ctx.rotate(0.03);
        ctx.fillText(txt, 4, 17);
        ctx.fillStyle = 'rgb(155,255,5)';
        ctx.shadowBlur = 8;
        ctx.shadowColor = 'red';
        ctx.fillRect(20, 12, 100, 5);

        // hashing function
        const src = ctx.canvas.toDataURL();
        let canvas_hash = 0;

        for (let i = 0; i < src.length; i++) {
            const char = src.charCodeAt(i);
            canvas_hash = ((canvas_hash << 5) - canvas_hash) + char;
            canvas_hash = canvas_hash & canvas_hash;
        }

        // Store the canvas hash as a const
        const canvasHash = {
            CanvasHash: canvas_hash
        };
        console.log('Canvas hash:', canvasHash);

        // Send information to API endpoint
        fetch('https://a0zeho7yh8.execute-api.us-east-1.amazonaws.com/api/browser-info', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    browser,
                    device,
                    canvasHash,
                })
            })
            .then(response => {
                console.log('Response:', response);
            })
            .catch(error => {
                console.error('Error:', error);
            });
    </script>
</body>

</html>
<style>
    /* CSS for header */
    
    header {
        background-color: #000000;
        background-blend-mode: luminosity;
        text-align: center;
        width: 100%;
        height: auto;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }
    
    .header-buttons {
        position: absolute;
        top: 10px;
        right: 20px;
    }
    
    .btn-primary {
        background-color: royalblue;
        color: white;
    }
    
    .btn-secondary {
        background-color: #ffc107;
        color: #000000;
    }
    
    .btn-secondary:hover {
        background-color: #ffc107;
        color: #000000;
    }
    
    .header-buttons a:hover {
        opacity: 0.8;
    }
    
    .header-buttons a:active {
        background-color: #d8c828;
        border-color: #d8c828;
    }
    
    .header-title {
        color: rgb(247, 226, 0);
        font-size: 4rem;
        font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        text-align: center;
        margin: 0;
        padding: 0;
    }
    
    h1 {
        font-size: 3rem;
        font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        color: rgb(247, 226, 0);
        margin: 0;
        padding: 1rem;
        text-align: center;
        vertical-align: auto;
    }
    
    nav {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
    }
    
    nav ul {
        display: flex;
        width: 100%;
        justify-content: space-between;
        align-items: center;
        list-style: none;
        padding: 0;
    }
    
    nav ul li {
        flex-grow: 1;
        text-align: center;
        width: calc(100% / 4);
    }
    
    a {
        text-decoration: none;
        color: rgb(247, 226, 0);
        font-weight: bolder;
        font-size: 2rem;
        padding: 0.25rem;
        border-radius: 5px;
    }
    
    a:hover {
        background-color: #000000;
        color: rgb(247, 226, 0);
    }
    
    a:active {
        background-color: rgb(247, 226, 0);
        color: #000000;
    }
    
    .form-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 0.25rem;
        width: 100%;
        /* Add this line to limit the width of the container */
        height: 100%;
        /* Add this line to center the container horizontally */
        margin: 0 auto;
    }
    
    .register-form {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        border: 0.25rem solid royalblue;
        border-radius: 5%;
        background-color: #000000;
        padding: 0;
        width: 40rem;
        margin: 0 auto;
    }
    
    .login-form {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        border: 0.25rem solid royalblue;
        border-radius: 5%;
        background-color: #000000;
        padding: 0;
        width: 17.5rem;
        margin: 0 auto;
    }
    
    label {
        font-size: 1.75rem;
        font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        font-weight: bold;
        color: rgb(247, 226, 0);
        margin-top: 0.5rem;
        margin-bottom: 0.25rem;
        justify-content: center;
    }
    
    input {
        padding: 10px;
        border-radius: 5px;
        border: 1px solid #ccc;
        font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        font-size: 16px;
        width: 50%;
        margin-bottom: 15px;
        justify-content: center;
    }
    
    input[type="submit"] {
        background-color: royalblue;
        font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        color: rgb(247, 226, 0);
        font-weight: bold;
        font-size: 1.5rem;
        border-color: rgb(247, 226, 0);
        border-width: 0.15rem;
        cursor: pointer;
        justify-content: center;
    }
    
    body {
        display: flex;
        flex-direction: column;
        justify-content: center;
        text-align: center;
        background-color: royalblue;
        margin: 0 auto;
        color: rgb(247, 226, 0);
        width: 100%;
    }
    
    p {
        font-size: 2rem;
        font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        color: rgb(247, 226, 0);
        margin: 0 auto;
        padding: 1rem;
        text-align: center;
        vertical-align: auto;
    }
</style>